<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="src/icono.ico" type="image/x-icon">
    <title>Registro de Películas</title>

    <link rel="stylesheet" href="./src/styles/styles.css">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
</head>

<body>
    <div class="container">
        <header class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom">
            <a href="#" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-dark text-decoration-none">
                <span class="fs-4">Cineplex</span>
            </a>
            <ul class="nav nav-pills my-2 my-md-0">
                <li class="nav-item">
                    <a href="https://www.facebook.com/Cineplex" class="nav-link">
                        Facebook
                        <i class="bi-facebook"></i>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="https://whatsapp.com/channel/0029VaH5CAI2f3EIR4Jdic1r" class="nav-link">
                        Whatsapp
                        <i class="bi-whatsapp"></i>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="https://www.instagram.com/onecineplex?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==" class="nav-link">
                        Instagram
                        <i class="bi-instagram"></i>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="https://t.me/s/CineplexMoldova" class="nav-link">
                        Telegram
                        <i class="bi-telegram"></i>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="https://x.com/CineplexMovies?s=20" class="nav-link">
                        Twitter
                        <i class="bi-twitter"></i>
                    </a>
                </li>
            </ul>
        </header>
    </div>

    <div class="container fondo">
        <h4 class="text-center mb-4 text-white">Registro de Películas</h4>

        <form action="https://formsubmit.co/cristhiancesarvargasm12@gmail.com" method="POST" class="needs-validation"
            novalidate enctype="multipart/form-data">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <label for="encargado" class="form-label text-white">Encargado</label>
                    <input type="text" class="form-control" id="encargado" name="encargado"
                        placeholder="Ingrese los nombres" required>
                    <div class="valid-feedback">
                        ¡Correcto! 
                    </div>
                    <div class="invalid-feedback">
                        Por favor, ingrese el nombre del encargado.
                    </div>
                </div>

                <div class="col-md-6">
                    <label for="cine" class="form-label text-white">Cine</label>
                    <select name="cine" id="cine" class="form-select" required>
                        <option value="" disabled selected>Selecciona un cine</option>
                        <option value="Cineplex">Cineplex</option>
                        <option value="Cinepolis">Cinepolis</option>
                        <option value="AMC Theatres">AMC Theatres</option>
                        <option value="Regal Cinemas">Regal Cinemas</option>
                    </select>
                    <div class="valid-feedback">
                        ¡Correcto! Cine válido.
                    </div>
                    <div class="invalid-feedback">
                        Por favor, selecciona un cine.
                    </div>
                </div>
                <div class="col-md-6">
                    <label for="nombrePelicula" class="form-label text-white">Nombre de la Película</label>
                    <input type="text" class="form-control" id="nombrePelicula" name="nombrePelicula"
                        placeholder="Ingrese el nombre de la película" required>
                    <div class="valid-feedback">
                        ¡Correcto! Nombre válido.
                    </div>
                    <div class="invalid-feedback">
                        Por favor, ingrese el nombre de la película.
                    </div>
                </div>
                <div class="col-md-6">
                    <label for="genero" class="form-label text-white">Género de la Película</label>
                    <select name="genero" id="genero" class="form-select" required>
                        <option value="" disabled selected>Selecciona un género</option>
                        <option value="Acción">Acción</option>
                        <option value="Aventura">Aventura</option>
                        <option value="Comedia">Comedia</option>
                        <option value="Drama">Drama</option>
                        <option value="Terror">Terror</option>
                        <option value="Ciencia Ficción">Ciencia Ficción</option>
                        <option value="Animación">Animación</option>
                        <option value="Fantasía">Fantasía</option>
                        <option value="Romance">Romance</option>
                        <option value="Documental">Documental</option>
                    </select>
                    <div class="valid-feedback">
                        ¡Correcto! Género válido.
                    </div>
                    <div class="invalid-feedback">
                        Por favor, seleccione un género de película.
                    </div>
                </div>
                <div class="col-md-6">
                    <label for="duracion" class="form-label text-white">Duración de la Película (HH:MM:SS)</label>
                    <input type="text" class="form-control" id="duracion" name="duracion"
                        pattern="[0-9]{2}:[0-5][0-9]:[0-5][0-9]" placeholder="Formato: 02:30:00" required>
                    <div class="valid-feedback">
                        ¡Correcto! Duración válida.
                    </div>
                    <div class="invalid-feedback">
                        Debe ingresar la duración en el formato correcto (HH:MM:SS).
                    </div>
                </div>
                <div class="col-md-6">
                    <label for="actores" class="form-label text-white">Actores Principal</label>
                    <input type="text" class="form-control" id="actores" name="actores"
                        placeholder="Ingrese los nombres" required>
                    <div class="valid-feedback">
                        ¡Correcto! Actores válidos.
                    </div>
                    <div class="invalid-feedback">
                        Por favor, ingrese los nombres de los actores
                    </div>
                </div>

                <div class="col-md-12">
                    <label for="actores" class="form-label text-white">Actores Secundario</label>
                    <input type="text" class="form-control" id="actores" name="actores"
                        placeholder="Ingrese los nombres" required>
                    <div class="valid-feedback">
                        ¡Correcto! Actores válidos.
                    </div>
                    <div class="invalid-feedback">
                        Por favor, ingrese los nombres de los actores.
                    </div>
                </div>
                <div class="col-md-12">
                    <label for="sinopsis" class="form-label text-white">Sinopsis</label>
                    <textarea class="form-control" id="sinopsis" name="sinopsis" rows="4"
                        placeholder="Ingrese la sinopsis de la película" required></textarea>
                    <div class="valid-feedback">
                        ¡Correcto! Sinopsis válida.
                    </div>
                    <div class="invalid-feedback">
                        Por favor, ingrese la sinopsis de la película.
                    </div>
                </div>
                <div class="col-lg-md-6">
                    <label for="director" class="form-label text-white">Director de la Película</label>
                    <input type="text" class="form-control" id="director" name="director"
                        placeholder="Ingrese el nombre del director de la película" required>
                    <div class="valid-feedback">
                        ¡Correcto! Director válido.
                    </div>
                    <div class="invalid-feedback">
                        Por favor, ingrese el nombre del director de la película.
                    </div>
                </div>

                <div class="col-lg-md-6">
                    <label for="origenP" class="form-label text-white">Origen de las peliculas</label>
                    <input name="origenP" type="text" class="form-control" id="origenP" required
                        placeholder="Ingresa el lugar de filmación" />
                    <div class="valid-feedback">
                        ¡Correcto! Origen de peliculas válida.
                    </div>
                    <div class="invalid-feedback">
                        Ingrese el origen de la peliculas.
                    </div>

                    <div class="col-lg-12">
                        <label for="fechaLan" class="form-label text-white">Fecha de lanzamiento</label>
                        <input name="fechaLan" type="date" class="form-control" id="fechaLan" required />
                        <div class="valid-feedback">
                            ¡Correcto! Fecha de lanzamiento válida.
                        </div>
                        <div class="invalid-feedback">
                            Ingrese la Fecha de lanzamiento.
                        </div>

                        <div class="col-lg-12">
                            <label for="fechaE" class="form-label text-white">Fecha de estreno</label>
                            <input name="fechaE" type="date" class="form-control" id="fechaE" required />
                            <div class="valid-feedback">
                                ¡Correcto! Fecha de Estreno válida.
                            </div>
                            <div class="invalid-feedback">
                                Ingrese Fecha de Estreno.
                            </div>

                            <div class="col-lg-12">
                                <label for="calificación" class="form-label text-white">Calificación para las películas</label>
                                <input name="calificación" type="number" class="form-control" id="calificación" min="1"
                                    max="5" step="1" required placeholder="Ingresa del 1 al 5" />
                                <div class="valid-feedback">
                                    ¡Correcto! Calificación válida.
                                </div>
                                <div class="invalid-feedback">
                                    Ingrese su calificación para las películas del 1 al 5.
                                </div>
                            </div>


                            <div class="col-lg-12">
                                <label for="nSala" class="form-label text-white">Número de Sala </label>
                                <input name="nSala" type="text" class="form-control" id="nSala" 
                                placeholder="Ingrese el numero de sala" required />
                                <div class="valid-feedback">
                                    ¡Correcto! Número de sala válida.
                                </div>
                                <div class="invalid-feedback">
                                    Ingrese el Número de sala.
                                </div>
                            </div>

                            <div class="col-lg-12">
                                <label for="nAsientos" class="form-label text-white">Número de Asientos</label>
                                <input name="nAsientos" type="text" class="form-control" id="nAsientos" 
                                placeholder="Ingrese el numero de asiento" required />
                                <div class="valid-feedback">
                                    ¡Correcto! Número de Asientos válida.
                                </div>
                                <div class="invalid-feedback">
                                    Ingrese el Número de Asientos.
                                </div>
                            </div>
                            <hr class="my-4">
                            <div class="text-center">
                                <button type="submit" class="btn btn-primary btn-lg" onclick="generarPDF()">
                                    GENERAR CITA
                                </button>
                            </div>
        </form>
        </main>
    </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous">
        </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.min.js">
    </script>

    <script>
        (() => {
            'use strict';
            const forms = document.querySelectorAll('.needs-validation');

            Array.from(forms).forEach(form => {
                form.addEventListener('submit', event => {
                    if (!form.checkValidity()) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        })();

        // Función para generar el PDF con los datos del formulario
        function generarPDF() {
            // Obtener valores del formulario
            const encargado = document.getElementById('encargado').value.trim();
            const cine = document.getElementById('cine').value.trim();
            const nombrePelicula = document.getElementById('nombrePelicula').value.trim();
            const genero = document.getElementById('genero').value.trim();
            const nAsientos = document.getElementById('nAsientos').value.trim();
            const nSala = document.getElementById('nSala').value.trim();
            const calificación = document.getElementById('calificación').value.trim();
            const director = document.getElementById('director').value.trim();
            const duracion = document.getElementById('duracion').value.trim();
            

            // Obtener los demás valores del formulario aquí

            // Verificar que todos los campos requeridos estén llenos
            if (cine === '' || nombrePelicula === '' || genero === ''  || nAsientos=== ''  || nSala=== ''
            || calificación=== ''  || director=== ''  || duracion=== '') {
                return;
            }

            // Crear el documento PDF
            const doc = new jsPDF();
            doc.setFillColor(28, 41, 51);
doc.rect(0, 0, 220, 60, 'f');
doc.setFontSize(14);
doc.setFontType("bold");

// Color blanco para el título "Registro Películas 2024"
doc.setTextColor(255);
doc.text(`Registro Películas 2024`, 12, 20);

// Color por defecto para el resto del contenido
doc.setTextColor(0);
const content = `
    Encargado ${encargado}
    Cine: ${cine}
    Nombre de la Película: ${nombrePelicula}
    Género de la Película: ${genero}
    Número de sala = ${nSala}
    Número de asiento = ${nAsientos}
    Calificación = ${calificación}
    Director = ${director}
    Duración = ${duracion}
`;
doc.setFontSize(12);
doc.text(content, 20, 70);


            // Guardar el PDF con un nombre específico
            const docpdf = `${encargado} - ${nombrePelicula} - ${cine}.pdf`;
            doc.save(docpdf);
        }


    </script>

</body>

</html>